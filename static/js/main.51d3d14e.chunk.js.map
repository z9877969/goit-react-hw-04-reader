{"version":3,"sources":["Components/Controls/controls.module.css","Components/Counter/counter.module.css","Components/Publication/publication.module.css","Components/Reader/reader.module.css","Components/Controls/Controls.jsx","Components/Counter/Counter.jsx","Components/Publication/Publication.jsx","Components/Reader/Reader.jsx","Components/App/App.jsx","index.jsx"],"names":["module","exports","Controls","onControlsBtn","index","items","className","style","controls","type","disabled","data-action","onClick","length","Counter","counter","Publication","publication","title","text","getIndexFromLocation","location","queryString","parse","search","item","Reader","state","changeUrl","props","history","push","indexOfItemFromUrl","Number","indexSetState","setState","getUpdateByUrl","prevProps","prevState","newIndex","handlerControlsBtn","action","target","dataset","prev","this","reader","React","Component","App","path","component","to","ReactDOM","render","basename","document","getElementById"],"mappings":"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","file":"static/js/main.51d3d14e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"controls\":\"controls_controls__1jj5K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"counter\":\"counter_counter__X7pPW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"publication\":\"publication_publication__TxaWK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reader\":\"reader_reader__R4Azv\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './controls.module.css';\n\nconst Controls = ({ onControlsBtn, index, items }) => (\n  <section className={style.controls}>\n    <button\n      type=\"button\"\n      className=\"button\"\n      disabled={index <= 1}\n      data-action=\"prev\"\n      onClick={onControlsBtn}\n    >\n      Назад\n    </button>\n    <button\n      type=\"button\"\n      className=\"button\"\n      disabled={index === items.length}\n      data-action=\"next\"\n      onClick={onControlsBtn}\n    >\n      Вперед\n    </button>\n  </section>\n);\n\nControls.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.object.isRequired).isRequired,\n  onControlsBtn: PropTypes.func.isRequired,\n  index: PropTypes.number.isRequired,\n};\n\nexport default Controls;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './counter.module.css';\n\nconst Counter = ({ items, index }) => (\n  <p className={style.counter}>\n    {index} / {items.length}\n  </p>\n);\n\nCounter.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.object.isRequired).isRequired,\n  index: PropTypes.number.isRequired,\n};\n\nexport default Counter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './publication.module.css';\n\nconst Publication = ({ index, items }) => (\n  <article className={style.publication}>\n    <h2>\n      {index}. {items[index - 1].title}\n    </h2>\n    <p>{items[index - 1].text}</p>\n  </article>\n);\n\nPublication.propTypes = {\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      title: PropTypes.string.isRequired,\n      text: PropTypes.string.isRequired,\n    }),\n  ).isRequired,\n  index: PropTypes.number.isRequired,\n};\n\nexport default Publication;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport queryString from 'query-string';\nimport Controls from '../Controls/Controls';\nimport Counter from '../Counter/Counter';\nimport Publication from '../Publication/Publication';\nimport items from '../../json/publications.json';\nimport style from './reader.module.css';\n\nconst getIndexFromLocation = location =>\n  queryString.parse(location.search).item;\n\nclass Reader extends React.Component {\n  // eslint-disable-next-line react/state-in-constructor\n  state = {\n    index: 1,\n  };\n\n  componentDidMount() {\n    const newIndex = this.indexOfItemFromUrl();\n    \n    if (!newIndex || newIndex > items.length) {\n      return this.changeUrl(1);\n    }\n\n    this.indexSetState(newIndex);\n    \n    return this.changeUrl(newIndex);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.getUpdateByUrl(prevProps, prevState);\n  }\n\n  changeUrl = index => {\n    const { history, location } = this.props;\n\n    history.push({\n      ...location,\n      search: `item=${index}`,\n    });\n  };\n\n  indexOfItemFromUrl = () => {\n    const { location } = this.props;\n    return Number(getIndexFromLocation(location));\n  };\n\n  indexSetState = index => {\n    this.setState({\n      index: Number(index),\n    });\n  };\n\n  getUpdateByUrl = (prevProps, prevState) => {\n    const { index } = this.state;\n    const { location } = this.props;\n    if (location.search !== prevProps.location.search) {\n      const newIndex =\n        this.indexOfItemFromUrl() > items.length\n          ? 1\n          : this.indexOfItemFromUrl();\n      if (!getIndexFromLocation(location)) {\n        const index = 1;\n        this.props.history.push({\n          ...location,\n          search: `item=${index}`,\n        });\n        return this.setState({ index });\n      }\n\n      this.setState({ index: newIndex });\n      return this.changeUrl(newIndex);\n    }\n\n    if (index !== prevState.index) {\n      this.changeUrl(index);\n    }\n  };\n\n  handlerControlsBtn = ({ target }) => {\n    const {\n      dataset: { action },\n    } = target;\n    if (action === 'prev') {\n      this.setState(prev => ({\n        index: prev.index - 1,\n      }));\n    } else if (action === 'next') {\n      this.setState(prev => ({\n        index: prev.index + 1,\n      }));\n    }\n  };\n\n  render() {\n    const { index } = this.state;\n\n    return (\n      <div className={style.reader}>\n        <Controls\n          index={index}\n          items={items}\n          onControlsBtn={this.handlerControlsBtn}\n        />\n        <Counter items={items} index={index} />\n        <Publication index={index} items={items} />\n      </div>\n    );\n  }\n}\n\nReader.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n  location: PropTypes.shape({\n    search: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default Reader;\n","import React from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport Reader from '../Reader/Reader';\n\nconst App = () => (\n  <div className=\"App\">\n    <Switch>\n      <Route path=\"/reader\" component={Reader} />\n      <Redirect to=\"/reader\" />\n    </Switch>\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter, Route } from 'react-router-dom';\nimport './index.css';\nimport App from './Components/App/App';\n\nReactDOM.render(\n  <HashRouter basename=\"/\">\n    <Route component={App} />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}